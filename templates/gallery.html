<!-- gallery.html (previously index.html) -->
{% extends "base.html" %}
{% block content %}
<div x-data="{ currentIndex: 0 }" class="relative">
    <div class="flex items-center justify-center">
        <button @click="currentIndex = (currentIndex - 1 + {{ images|length }}) % {{ images|length }}" class="text-4xl">&lt;</button>
        <div class="flex overflow-hidden">
            {% for image in images %}
            <div x-show="currentIndex === {{ loop.index0 }}" class="w-64 h-64 mx-2 transition-all duration-300" :class="{ 'scale-125': currentIndex === {{ loop.index0 }} }">
                <img src="{{ url_for('static', filename=image.path) }}" alt="Adventure image" class="w-full h-full object-cover rounded-lg shadow-lg">
            </div>
            {% endfor %}
        </div>
        <button @click="currentIndex = (currentIndex + 1) % {{ images|length }}" class="text-4xl">&gt;</button>
    </div>
    <div class="mt-8">
        {% for image in images %}
        <div x-show="currentIndex === {{ loop.index0 }}" class="text-center">
            {% for message in image.messages %}
            <p class="mb-2"><span class="font-bold">{{ message.author }}:</span> {{ message.content }}</p>
            {% endfor %}
            <form hx-post="{{ url_for('add_message', image_id=image.id) }}" hx-swap="outerHTML" class="mt-4">
                <input type="text" name="author" placeholder="Your name" class="border p-2 rounded">
                <input type="text" name="content" placeholder="Your message" class="border p-2 rounded ml-2">
                <button type="submit" class="bg-blue-500 text-white p-2 rounded ml-2">Add Message</button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}